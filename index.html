<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">

    <!-- css personal-->
    <link rel="stylesheet" href="CSS/main.css">
    <title>Form</title>
</head>
<body>
  <div class="container">
    <form action="" id="form">
        <label>Escribe el precio de tu producto</label>
        <input type="number" id="InputPrice" class="field" required><br/>

        <label>Escribe el nombre de tu cupon de descuento:</label>
        <input type="InputCoupon" id="InputCoupon" class="field" required><br/>

        <p class="center-content"><button type="submit" id="submit" class="btn btn-success">Enviar datos</button></p>
        <div id="msg"></div>
    </form>
    
</div>

<script>


document.getElementById('form').addEventListener('submit',function(e)

         {

        e.preventDefault();

        var inputs = document.getElementsByTagName('input')

        const User = {price : document.getElementById("InputPrice").value,
                        coupon: document.getElementById("InputCoupon").value,
                      }
        
        const Coupons = [
        {
            name: "JuanDC_es_Batman",
            discount: 15,
        },
        {
            name: "pero_no_le_digas_a_nadie",
            discount: 30,
        },
        {
            name: "bebe",
            discount: 25,
        },
        ];


        function Calculate_Discounted_Price(Price,Discount)
        {
            const Price_less_Discount = 100 - Discount
            const Price_With_Discount = (Price * Price_less_Discount)/100
            
            return Price_With_Discount


        }

        const Is_Coupon_Value_Valid = function (Coupon){
            return Coupon.name === User.coupon;
        }

        const UserCoupon = Coupons.find(Is_Coupon_Value_Valid);

        if(!UserCoupon){
            alert("El cupon " + User.coupon + " no es v√°lido");
        }else
        
        {

            const Discount = UserCoupon.discount;

            const Price = User.price


            const Price_With_Discount = Calculate_Discounted_Price(Price,Discount);

            const msg = document.getElementById("msg");
            msg.innerHTML = "El precio con descuento es: $" + Price_With_Discount;
            
        }


        for(var i = 0;i<inputs.length;i++)
        {
            inputs[i].value = '';
        }
  
        }

)


</script>
</body>
</html>
